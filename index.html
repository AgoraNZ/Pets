<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Saskia's Ark - Modern Pet Marketplace</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* Base Reset & Fonts */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Roboto', sans-serif; background: #f2f2f2; color: #333; }
    a { text-decoration: none; color: inherit; }
    
    /* Header & Navigation */
    header {
      background: #0073e6;
      color: #fff;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    header h1 { font-size: 1.8em; }
    nav a, nav button {
      margin: 0 8px;
      font-weight: 500;
      color: #fff;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1em;
    }
    nav a:hover, nav button:hover { text-decoration: underline; }
    
    /* Slider */
    .slider {
      position: relative;
      width: 100%;
      height: 400px;
      overflow: hidden;
    }
    .slider .slide {
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
    .slider .slide.active { opacity: 1; }
    .slider .slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    /* Category Menu & View Toggle */
    #categoryMenu {
      margin: 20px 0;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }
    #categoryMenu button {
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      background: #ddd;
      cursor: pointer;
      font-weight: 500;
    }
    #categoryMenu button.active {
      background: #0073e6;
      color: #fff;
    }
    #viewToggle {
      margin-left: auto;
    }
    #viewToggle button {
      padding: 6px 10px;
      border: none;
      border-radius: 4px;
      background: #ddd;
      cursor: pointer;
      font-weight: 500;
    }
    #viewToggle button.active {
      background: #0073e6;
      color: #fff;
    }
    
    /* Listings Grid */
    .listing-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    /* Listings List */
    .listing-list {
      display: block;
      margin-top: 20px;
    }
    .listing-list .listing-card {
      display: flex;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      cursor: pointer;
      margin-bottom: 15px;
      transition: transform 0.3s;
    }
    .listing-list .listing-card:hover { transform: translateY(-5px); }
    .listing-list .listing-card img {
      width: 200px;
      height: 150px;
      object-fit: cover;
      flex-shrink: 0;
    }
    .listing-list .listing-info {
      padding: 15px;
    }
    
    /* Common Listing Card Styles */
    .listing-card {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.3s;
    }
    .listing-card:hover { transform: translateY(-5px); }
    .listing-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .listing-info {
      padding: 15px;
    }
    .listing-info h3 { font-size: 1.2em; margin-bottom: 8px; }
    .listing-info p { font-size: 0.9em; line-height: 1.4; }
    .listing-info .price { color: #0073e6; font-weight: bold; margin-top: 10px; }
    .listing-info .seller { font-style: italic; margin-top: 5px; font-size: 0.85em; }
    
    /* Detail Page */
    .detail-container {
      background: #fff;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      animation: fadeIn 0.5s;
    }
    .detail-image {
      width: 100%;
      height: 400px;
      object-fit: cover;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
    }
    .detail-info { margin-bottom: 15px; }
    .detail-info p { margin: 5px 0; }
    .ask-btn {
      background: #0073e6;
      color: #fff;
      border: none;
      padding: 10px 15px;
      font-size: 1em;
      cursor: pointer;
      border-radius: 3px;
      margin-top: 15px;
    }
    .ask-btn:hover { background: #005bb5; }
    
    /* Footer */
    footer {
      text-align: center;
      padding: 15px;
      font-size: 0.8em;
      color: #777;
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Saskia's Ark</h1>
    <nav>
      <a href="#home">Home</a>
      <a href="#sell">Sell a Pet</a>
      <a href="#upload">Super Buyer Upload</a>
      <span id="authLinks">
        <a href="#login" id="loginLink">Login</a>
        <a href="#register" id="registerLink">Register</a>
      </span>
      <button id="logoutBtn" style="display:none;">Logout</button>
    </nav>
  </header>
  
  <!-- Slider Section -->
  <div class="slider" id="slider">
    <div class="slide active">
      <img src="https://images.unsplash.com/photo-1558788353-f76d92427f16?auto=format&fit=crop&w=1200&h=400" alt="Golden Retriever">
    </div>
    <div class="slide">
      <img src="https://images.unsplash.com/photo-1576774431041-4b52378a4ffb?auto=format&fit=crop&w=1200&h=400" alt="Labrador Retriever">
    </div>
    <div class="slide">
      <img src="https://images.unsplash.com/photo-1592194996308-7b43878e84a6?auto=format&fit=crop&w=1200&h=400" alt="Siamese Cat">
    </div>
    <div class="slide">
      <img src="https://images.unsplash.com/photo-1575404083516-24d5cebd4e7e?auto=format&fit=crop&w=1200&h=400" alt="British Shorthair">
    </div>
  </div>
  
  <main>
    <div id="content"></div>
    <!-- Category Menu & View Toggle -->
    <div id="categoryMenu"></div>
    <!-- Listings Container (grid or list) -->
    <div id="listingsContainer"></div>
  </main>
  
  <footer>
    &copy; 2025 Saskia's Ark. All rights reserved.
  </footer>
  
  <script>
    // Global variables for category filter and view mode
    let currentCategory = "All";
    let viewMode = "grid"; // options: "grid" or "list"
    
    // --- Slider Functionality ---
    const slides = document.querySelectorAll('.slide');
    let currentSlide = 0;
    setInterval(() => {
      slides[currentSlide].classList.remove('active');
      currentSlide = (currentSlide + 1) % slides.length;
      slides[currentSlide].classList.add('active');
    }, 4000);
    
    // --- LocalStorage Persistence Functions ---
    function getUsers() {
      return JSON.parse(localStorage.getItem("users") || "[]");
    }
    function saveUsers(users) {
      localStorage.setItem("users", JSON.stringify(users));
    }
    function getPets() {
      return JSON.parse(localStorage.getItem("pets") || "[]");
    }
    function savePets(pets) {
      localStorage.setItem("pets", JSON.stringify(pets));
    }
    function getCurrentUser() {
      const userId = localStorage.getItem("currentUser");
      if (!userId) return null;
      return getUsers().find(u => u.id === userId);
    }
    function setCurrentUser(userId) {
      localStorage.setItem("currentUser", userId);
    }
    function clearCurrentUser() {
      localStorage.removeItem("currentUser");
    }
    function generateId() {
      return '_' + Math.random().toString(36).substr(2, 9);
    }
    
    // --- Navigation & Routing ---
    function updateNav() {
      const currentUser = getCurrentUser();
      document.getElementById("loginLink").style.display = currentUser ? "none" : "inline";
      document.getElementById("registerLink").style.display = currentUser ? "none" : "inline";
      document.getElementById("logoutBtn").style.display = currentUser ? "inline" : "none";
    }
    document.getElementById("logoutBtn").addEventListener("click", () => {
      clearCurrentUser();
      window.location.hash = "#home";
      render();
    });
    
    function render() {
      const hash = window.location.hash || "#home";
      const content = document.getElementById("content");
      content.innerHTML = "";
      updateNav();
      if (hash === "#home") {
        renderHome();
      } else if (hash === "#login") {
        renderLogin();
      } else if (hash === "#register") {
        renderRegister();
      } else if (hash === "#sell") {
        renderSellPet();
      } else if (hash === "#upload") {
        renderUpload();
      } else if (hash.startsWith("#pet-")) {
        const petId = hash.slice(5);
        renderPetDetail(petId);
      } else {
        content.innerHTML = "<p>Page not found.</p>";
      }
    }
    window.addEventListener("hashchange", render);
    
    // --- Category Menu & View Toggle ---
    function renderCategoryMenu() {
      const menu = document.getElementById("categoryMenu");
      menu.innerHTML = `
        <button class="${currentCategory==="All"?"active":""}" onclick="setCategory('All')">All</button>
        <button class="${currentCategory==="Dogs"?"active":""}" onclick="setCategory('Dogs')">Dogs</button>
        <button class="${currentCategory==="Cats"?"active":""}" onclick="setCategory('Cats')">Cats</button>
        <button class="${currentCategory==="Rabbits"?"active":""}" onclick="setCategory('Rabbits')">Rabbits</button>
        <button class="${currentCategory==="Guinea Pigs"?"active":""}" onclick="setCategory('Guinea Pigs')">Guinea Pigs</button>
        <span id="viewToggle">
          <button class="${viewMode==='grid'?'active':''}" onclick="setViewMode('grid')">Grid</button>
          <button class="${viewMode==='list'?'active':''}" onclick="setViewMode('list')">List</button>
        </span>
      `;
    }
    
    function setCategory(cat) {
      currentCategory = cat;
      renderListings();
      renderCategoryMenu();
    }
    
    function setViewMode(mode) {
      viewMode = mode;
      renderListings();
      renderCategoryMenu();
    }
    
    // --- Views ---
    function renderHome() {
      const content = document.getElementById("content");
      content.innerHTML = "<h2>Featured Listings</h2>";
      renderCategoryMenu();
      renderListings();
    }
    
    function renderLogin() {
      const content = document.getElementById("content");
      content.innerHTML = `
        <h2>Login</h2>
        <form id="loginForm">
          <label>Email: <input type="email" name="email" required></label>
          <label>Password: <input type="password" name="password" required></label>
          <button type="submit">Login</button>
        </form>
        <div id="loginError" style="color:red;"></div>
      `;
      document.getElementById("loginForm").addEventListener("submit", (e) => {
        e.preventDefault();
        const email = e.target.email.value;
        const password = e.target.password.value;
        const users = getUsers();
        const user = users.find(u => u.email === email && u.password === password);
        if (user) {
          setCurrentUser(user.id);
          window.location.hash = "#home";
          render();
        } else {
          document.getElementById("loginError").innerText = "Invalid credentials";
        }
      });
    }
    
    function renderRegister() {
      const content = document.getElementById("content");
      content.innerHTML = `
        <h2>Register</h2>
        <form id="registerForm">
          <label>Username: <input type="text" name="username" required></label>
          <label>Email: <input type="email" name="email" required></label>
          <label>Password: <input type="password" name="password" required></label>
          <button type="submit">Register</button>
        </form>
        <div id="registerError" style="color:red;"></div>
      `;
      document.getElementById("registerForm").addEventListener("submit", (e) => {
        e.preventDefault();
        const username = e.target.username.value;
        const email = e.target.email.value;
        const password = e.target.password.value;
        const users = getUsers();
        if (users.find(u => u.email === email)) {
          document.getElementById("registerError").innerText = "User already exists";
          return;
        }
        const newUser = { 
          id: generateId(), 
          username, 
          email, 
          password, 
          superBuyer: false, 
          propertyPhoto: null 
        };
        users.push(newUser);
        saveUsers(users);
        setCurrentUser(newUser.id);
        window.location.hash = "#home";
        render();
      });
    }
    
    function renderSellPet() {
      const currentUser = getCurrentUser();
      if (!currentUser) {
        window.location.hash = "#login";
        render();
        return;
      }
      const content = document.getElementById("content");
      content.innerHTML = `
        <h2>Sell a Pet</h2>
        <form id="sellForm">
          <label>Title: <input type="text" name="title" required></label>
          <label>Type: <input type="text" name="type" required></label>
          <label>Breed: <input type="text" name="breed"></label>
          <label>Age: <input type="number" name="age"></label>
          <label>Description:<br><textarea name="description"></textarea></label>
          <label>Price: <input type="number" name="price" required></label>
          <label>Location: <input type="text" name="location" value="Auckland" required></label>
          <button type="submit">Create Listing</button>
        </form>
        <div id="sellError" style="color:red;"></div>
      `;
      document.getElementById("sellForm").addEventListener("submit", (e) => {
        e.preventDefault();
        const pet = {
          id: generateId(),
          title: e.target.title.value,
          type: e.target.type.value,
          breed: e.target.breed.value,
          age: e.target.age.value,
          description: e.target.description.value,
          price: e.target.price.value,
          location: e.target.location.value,
          listingNumber: "Listing #" + Math.floor(Math.random()*10000000000),
          sellerId: currentUser.id,
          image: "https://source.unsplash.com/featured/300x200/?" + encodeURIComponent(e.target.type.value)
        };
        const pets = getPets();
        pets.push(pet);
        savePets(pets);
        window.location.hash = "#home";
        render();
      });
    }
    
    function renderUpload() {
      const currentUser = getCurrentUser();
      if (!currentUser) {
        window.location.hash = "#login";
        render();
        return;
      }
      const content = document.getElementById("content");
      content.innerHTML = `
        <h2>Super Buyer Qualification</h2>
        <p>Upload a photo of your property so sellers can see where the pet will be going.</p>
        <form id="uploadForm">
          <input type="file" name="photo" accept="image/*" required><br>
          <button type="submit">Upload Photo</button>
        </form>
        <div id="uploadMsg"></div>
      `;
      document.getElementById("uploadForm").addEventListener("submit", (e) => {
        e.preventDefault();
        const fileInput = e.target.photo;
        const file = fileInput.files[0];
        const reader = new FileReader();
        reader.onload = function(event) {
          let users = getUsers();
          const userIndex = users.findIndex(u => u.id === currentUser.id);
          if (userIndex !== -1) {
            users[userIndex].propertyPhoto = event.target.result;
            users[userIndex].superBuyer = true;
            saveUsers(users);
            document.getElementById("uploadMsg").innerText = "Upload successful! You are now a Super Buyer.";
          }
        }
        reader.readAsDataURL(file);
      });
    }
    
    function renderPetDetail(petId) {
      const content = document.getElementById("content");
      const pets = getPets();
      const pet = pets.find(p => p.id === petId);
      if (!pet) {
        content.innerHTML = "<p>Listing not found.</p>";
        return;
      }
      const users = getUsers();
      const seller = users.find(u => u.id === pet.sellerId) || { username: "Saskia's Ark" };
      
      // For larger image, if URL contains width/height parameters, modify them
      let largeImage = pet.image;
      if(largeImage.indexOf("w=300") !== -1) {
        largeImage = largeImage.replace("w=300", "w=800").replace("h=200", "h=400");
      }
      
      content.innerHTML = `
        <div class="detail-container">
          <img class="detail-image" src="${largeImage}" alt="${pet.title}">
          <h2>${pet.title}</h2>
          <div class="detail-info"><p><strong>Type:</strong> ${pet.type}</p></div>
          <div class="detail-info"><p><strong>Breed:</strong> ${pet.breed}</p></div>
          <div class="detail-info"><p><strong>Age:</strong> ${pet.age}</p></div>
          <div class="detail-info"><p><strong>Description:</strong> ${pet.description}</p></div>
          <div class="detail-info"><p class="price"><strong>Price:</strong> \$${pet.price}</p></div>
          <div class="detail-info"><p><strong>Location:</strong> ${pet.location}</p></div>
          <div class="detail-info"><p><strong>Listing Number:</strong> ${pet.listingNumber}</p></div>
          <div class="detail-info"><p class="seller"><strong>Seller:</strong> ${seller.username}</p></div>
          <button class="ask-btn" onclick="askSeller('${seller.username}')">Ask Seller a Question</button>
          <p><a href="#home">Back to Listings</a></p>
        </div>
      `;
    }
    
    function askSeller(sellerName) {
      const question = prompt("Enter your question for " + sellerName + ":");
      if (question) {
        alert("Your question has been sent to " + sellerName + ":\n\n" + question);
      }
    }
    
    // --- Pre-populate 20 Sample Listings (if none exist) ---
    function populateSampleListings() {
      if(getPets().length > 0) return; // Do not overwrite existing listings
      const sampleListings = [
        {
          id: generateId(),
          title: "Golden Retriever",
          type: "Dog",
          breed: "Golden Retriever",
          age: 3,
          description: "Friendly, loyal and energetic. A perfect family companion.",
          price: 600,
          location: "Auckland",
          listingNumber: "Listing #5223175989",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1560807707-8cc77767d783?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Z29sZGVuJTIwcmV0cmlldmVyfGVufDB8fDB8fA==&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Labrador Retriever",
          type: "Dog",
          breed: "Labrador Retriever",
          age: 4,
          description: "A playful and loving Labrador ready for a new home.",
          price: 650,
          location: "Auckland",
          listingNumber: "Listing #5223175990",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1576774431041-4b52378a4ffb?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NXx8bGFicmFkb3IlMjByZXRyaWV2ZXJ8ZW58MHx8MHx8&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Siamese Cat",
          type: "Cat",
          breed: "Siamese",
          age: 2,
          description: "Elegant and vocal, this Siamese cat is a charming companion.",
          price: 300,
          location: "Auckland",
          listingNumber: "Listing #5223175991",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1592194996308-7b43878e84a6?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8c2lhbWVzZSUyMGNhdHxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Persian Cat",
          type: "Cat",
          breed: "Persian",
          age: 3,
          description: "Fluffy and affectionate with a regal demeanor.",
          price: 350,
          location: "Auckland",
          listingNumber: "Listing #5223175992",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1594479571575-fd08d3b52a74?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8cGVyc2lhbiUyMGNhdHxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "British Shorthair",
          type: "Cat",
          breed: "British Shorthair",
          age: 3,
          description: "Calm and affectionate with a plush, dense coat.",
          price: 320,
          location: "Auckland",
          listingNumber: "Listing #5223175993",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1575404083516-24d5cebd4e7e?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8YnJpdGlzaCUyMHNob3J0aGFpcnxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Rex Rabbit",
          type: "Rabbit",
          breed: "Rex",
          age: 1,
          description: "Soft-furred and gentle, ideal for petting.",
          price: 90,
          location: "Auckland",
          listingNumber: "Listing #5223175994",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1589923188900-3ef4b8bb110b?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8cmV4JTIwcmFiYml0fGVufDB8fDB8fA==&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Lop Rabbit",
          type: "Rabbit",
          breed: "Lop",
          age: 1,
          description: "Adorable lop-eared rabbit with a sweet temperament.",
          price: 85,
          location: "Auckland",
          listingNumber: "Listing #5223175995",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1612817150060-6ec8cc4d89e4?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8bG9wJTIwcmFiYml0fGVufDB8fDB8fA==&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Netherland Dwarf Guinea Pig",
          type: "Guinea Pig",
          breed: "Netherland Dwarf",
          age: 1,
          description: "Small, energetic and perfect for a first pet.",
          price: 45,
          location: "Auckland",
          listingNumber: "Listing #5223175996",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1581306503942-7a81f23f1a50?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Z3VpbmVhfGVufDB8fDB8fA==&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "American Guinea Pig",
          type: "Guinea Pig",
          breed: "American",
          age: 1,
          description: "Friendly and cuddly with a soft coat.",
          price: 50,
          location: "Auckland",
          listingNumber: "Listing #5223175997",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1581306503942-7a81f23f1a51?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8YW1lcmljYW4lMjBndWluZSUyMHBpZ3xlbnwwfHwwfA==&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Border Collie",
          type: "Dog",
          breed: "Border Collie",
          age: 2,
          description: "Intelligent and energetic—ideal for active families.",
          price: 500,
          location: "Auckland",
          listingNumber: "Listing #5223175998",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1598133894002-28390ff9e888?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NXx8Ym9yZGVyJTIwY29sbGllfGVufDB8fDB8fA==&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Bulldog",
          type: "Dog",
          breed: "Bulldog",
          age: 3,
          description: "Strong and gentle with a unique, charming personality.",
          price: 450,
          location: "Auckland",
          listingNumber: "Listing #5223175999",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1583511655612-b72f8a3f6e9a?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8YnVsbGRvZ2xlfGVufDB8fDB8fA==&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Maine Coon",
          type: "Cat",
          breed: "Maine Coon",
          age: 4,
          description: "Large, majestic and very friendly.",
          price: 400,
          location: "Auckland",
          listingNumber: "Listing #5223176000",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1570022188261-9088f7c03eb4?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8bWFpbiUyMGNvb24lMjBjYXR8ZW58MHx8MHx8&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Sphynx Cat",
          type: "Cat",
          breed: "Sphynx",
          age: 2,
          description: "Unique, affectionate and with a striking appearance.",
          price: 380,
          location: "Auckland",
          listingNumber: "Listing #5223176001",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1592194996308-6b43878e84a6?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8c3BoaW54JTIwY2F0fGVufDB8fDB8fA==&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Beagle",
          type: "Dog",
          breed: "Beagle",
          age: 3,
          description: "Small, energetic and known for its friendly nature.",
          price: 320,
          location: "Auckland",
          listingNumber: "Listing #5223176002",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1575936123452-b67c3203c357?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8YmVhZ2xlfGVufDB8fDB8fA==&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "German Shepherd",
          type: "Dog",
          breed: "German Shepherd",
          age: 4,
          description: "Loyal, protective and intelligent—a true working dog.",
          price: 550,
          location: "Auckland",
          listingNumber: "Listing #5223176003",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1568572933382-74d440642117?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Z2VybWFuJTIwc2hlcGVyZHxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Abyssinian Cat",
          type: "Cat",
          breed: "Abyssinian",
          age: 3,
          description: "Active, playful and with a striking coat pattern.",
          price: 330,
          location: "Auckland",
          listingNumber: "Listing #5223176004",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1583336660823-19f1218b3b2e?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8YWJ5c3NpbmlhbiUyMGNhdHxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Dutch Rabbit",
          type: "Rabbit",
          breed: "Dutch",
          age: 1,
          description: "Distinctive markings and a gentle, curious nature.",
          price: 95,
          location: "Auckland",
          listingNumber: "Listing #5223176005",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1598511728255-42cf1fbb1c80?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8ZHV0Y2glMjByYWJiaXQlMjB8ZW58MHx8MHx8&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Flemish Giant Rabbit",
          type: "Rabbit",
          breed: "Flemish Giant",
          age: 2,
          description: "Huge and gentle—needs plenty of space to roam.",
          price: 120,
          location: "Auckland",
          listingNumber: "Listing #5223176006",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1601758125000-2e3bdb1b45f5?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8ZmxlbWlzaCUyMGlnaWVudCUyMHJhYmJpdHxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Crested Guinea Pig",
          type: "Guinea Pig",
          breed: "Crested",
          age: 1,
          description: "Active and with a distinctive crest of hair.",
          price: 55,
          location: "Auckland",
          listingNumber: "Listing #5223176007",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1610917629300-d3cc35647b7a?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Y3Jlc3RlZCUyMGd1aW5lJTIwcGlnfGVufDB8fDB8fA==&auto=format&fit=crop&w=300&h=200"
        },
        {
          id: generateId(),
          title: "Dwarf Rabbit",
          type: "Rabbit",
          breed: "Dwarf",
          age: 1,
          description: "Compact and adorable with a lively personality.",
          price: 80,
          location: "Auckland",
          listingNumber: "Listing #5223176008",
          sellerId: "sample_seller",
          image: "https://images.unsplash.com/photo-1601758125100-2e3bdb1b45f6?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8ZHdhcmYlMjByYWJiaXQlMjB8ZW58MHx8MHx8&auto=format&fit=crop&w=300&h=200"
        }
      ];
      savePets(sampleListings);
    }
    
    // Render listings based on currentCategory and viewMode
    function renderListings() {
      populateSampleListings();
      const listings = getPets().filter(listing => {
        if (currentCategory === "All") return true;
        if (currentCategory === "Dogs") return listing.type.toLowerCase() === "dog";
        if (currentCategory === "Cats") return listing.type.toLowerCase() === "cat";
        if (currentCategory === "Rabbits") return listing.type.toLowerCase() === "rabbit";
        if (currentCategory === "Guinea Pigs") return listing.type.toLowerCase() === "guinea pig";
        return true;
      });
      const container = document.getElementById("listingsContainer");
      container.innerHTML = "";
      // Set container class based on viewMode
      container.className = viewMode === "grid" ? "listing-grid" : "listing-list";
      listings.forEach(listing => {
        const card = document.createElement("div");
        card.className = "listing-card";
        if(viewMode === "grid"){
          card.innerHTML = `
            <img src="${listing.image}" alt="${listing.title}">
            <div class="listing-info">
              <h3>${listing.title}</h3>
              <p>${listing.description}</p>
              <p class="price">\$${listing.price}</p>
              <p class="seller">Seller: Saskia's Ark</p>
            </div>
          `;
        } else {
          // List view: image on left, info on right
          card.innerHTML = `
            <img src="${listing.image}" alt="${listing.title}">
            <div class="listing-info">
              <h3>${listing.title}</h3>
              <p>${listing.description}</p>
              <p class="price">\$${listing.price}</p>
              <p class="seller">Seller: Saskia's Ark</p>
            </div>
          `;
        }
        card.addEventListener("click", () => {
          window.location.hash = "#pet-" + listing.id;
          render();
        });
        container.appendChild(card);
      });
    }
    
    render();
  </script>
</body>
</html>
